<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulateur d'improvisation</title>
    <style>
        /* Général */
        body {
            margin: 0;
            font-family: Helvetica, Arial, sans-serif;
            background-color: #FFFFFF; /* Fond blanc */
            color: #333333; /* Texte gris foncé */
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        /* Titre arrondi */
        .header {
            background-color: #1E3B6F; /* Bleu principal */
            color: #FFFFFF;
            font-size: 24px;
            font-weight: bold;
            text-align: center;
            padding: 20px 15px;
            width: 100%;
            border-radius: 0 0 30px 30px;
        }

        /* Conteneur principal */
        .container {
            width: 90%;
            max-width: 600px;
            text-align: center;
            padding: 20px;
            margin-top: 20px;
            border: 1px solid #1E3B6F;
            border-radius: 10px;
            box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
            position: relative;
        }

        /* Vidéos */
        video {
            width: 100%;
            max-width: 500px;
            margin: 20px auto;
            border: 3px solid #1E3B6F;
            border-radius: 8px;
        }

        /* Boutons */
        button {
            background-color: #1E3B6F; /* Bleu principal */
            color: #FFFFFF;
            font-family: Helvetica, Arial, sans-serif;
            font-size: 16px;
            border: none;
            border-radius: 25px;
            padding: 10px 20px;
            cursor: pointer;
            margin: 10px;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: #2F4A7E; /* Bleu plus clair */
        }

        /* Lien de téléchargement */
        #download-link {
            display: inline-block;
            background-color: #1E3B6F;
            color: white;
            font-family: Helvetica, Arial, sans-serif;
            font-size: 16px;
            text-decoration: none;
            padding: 10px 20px;
            border-radius: 25px;
            margin-top: 15px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        #download-link:hover {
            background-color: #2F4A7E;
        }

        /* Texte de statut */
        #status {
            margin-top: 10px;
            font-size: 14px;
            color: #333333;
        }

        /* Silhouettes du public */
        .audience-group {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            height: 200px;
        }

        .audience-group.left {
            left: -80px;
        }

        .audience-group.right {
            right: -80px;
        }

        .silhouette {
            background-color: #1E3B6F; /* Bleu principal */
            border-radius: 50%;
            position: relative;
        }

        .silhouette.small {
            width: 30px;
            height: 30px;
        }

        .silhouette.medium {
            width: 40px;
            height: 40px;
        }

        .silhouette.large {
            width: 50px;
            height: 50px;
        }

        .silhouette:after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #1E3B6F;
            border-radius: 50%;
        }

        .silhouette.small:after {
            width: 45px;
            height: 20px;
        }

        .silhouette.medium:after {
            width: 60px;
            height: 25px;
        }

        .silhouette.large:after {
            width: 75px;
            height: 30px;
        }

        /* Couleurs alternées */
        .silhouette:nth-child(odd) {
            background-color: #2F4A7E; /* Bleu secondaire */
        }
    </style>
</head>
<body>
    <!-- Titre de la page -->
    <div class="header">
        Simulateur d'improvisation en public Letmotiv
    </div>

    <!-- Contenu principal -->
    <div class="container">
        <!-- Groupe de silhouettes gauche -->
        <div class="audience-group left">
            <div class="silhouette small"></div>
            <div class="silhouette medium"></div>
            <div class="silhouette large"></div>
            <div class="silhouette medium"></div>
        </div>

        <!-- Groupe de silhouettes droite -->
        <div class="audience-group right">
            <div class="silhouette medium"></div>
            <div class="silhouette large"></div>
            <div class="silhouette small"></div>
            <div class="silhouette medium"></div>
        </div>

        <!-- Vidéo de prévisualisation -->
        <video id="preview" autoplay muted></video>

        <!-- Boutons d'enregistrement -->
        <div>
            <button id="start-btn">Démarrer l'enregistrement</button>
            <button id="stop-btn" disabled>Arrêter l'enregistrement</button>
        </div>

        <!-- Texte de statut -->
        <p id="status">Appuyez sur "Démarrer l'enregistrement" pour commencer.</p>

        <!-- Vidéo enregistrée -->
        <video id="playback" controls style="display: none;"></video>

        <!-- Lien de téléchargement -->
        <a id="download-link" style="display: none;">Télécharger l'enregistrement</a>
    </div>

    <script>
        let mediaRecorder;
        let recordedChunks = [];
        const preview = document.getElementById('preview');
        const playback = document.getElementById('playback');
        const startBtn = document.getElementById('start-btn');
        const stopBtn = document.getElementById('stop-btn');
        const statusText = document.getElementById('status');
        const downloadLink = document.getElementById('download-link');

        // Fonction pour configurer l'accès à la webcam
        async function setupCamera() {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ video: true });
                preview.srcObject = stream;
                return stream;
            } catch (error) {
                statusText.textContent = 'Erreur : Impossible d\'accéder à la webcam.';
                console.error('Erreur d\'accès à la webcam :', error);
            }
        }

        // Démarrer l'enregistrement
        startBtn.addEventListener('click', async () => {
            const stream = await setupCamera();
            if (!stream) return;

            mediaRecorder = new MediaRecorder(stream);
            recordedChunks = [];

            mediaRecorder.ondataavailable = (event) => {
                if (event.data.size > 0) {
                    recordedChunks.push(event.data);
                }
            };

            mediaRecorder.onstop = () => {
                const videoBlob = new Blob(recordedChunks, { type: 'video/webm' });
                const videoURL = URL.createObjectURL(videoBlob);

                // Configurer la lecture et le téléchargement
                playback.src = videoURL;
                playback.style.display = 'block';

                downloadLink.href = videoURL;
                downloadLink.download = 'enregistrement-video.webm';
                downloadLink.textContent = 'Télécharger l\'enregistrement';
                downloadLink.style.display = 'inline-block';

                // Arrêter le flux vidéo
                const tracks = stream.getTracks();
                tracks.forEach((track) => track.stop());
            };

            mediaRecorder.start();
            statusText.textContent = 'Enregistrement en cours...';
            startBtn.disabled = true;
            stopBtn.disabled = false;

            // Arrêter après 2 minutes automatiquement
            setTimeout(() => {
                if (mediaRecorder.state === 'recording') {
                    mediaRecorder.stop();
                    statusText.textContent = 'Enregistrement terminé.';
                    startBtn.disabled = false;
                    stopBtn.disabled = true;
                }
            }, 2 * 60 * 1000);
        });

        // Arrêter l'enregistrement
        stopBtn.addEventListener('click', () => {
            if (mediaRecorder && mediaRecorder.state === 'recording') {
                mediaRecorder.stop();
                statusText.textContent = 'Enregistrement terminé.';
                startBtn.disabled = false;
                stopBtn.disabled = true;
            }
        });
    </Le code ci-dessus contient toutes les fonctionnalités demandées, avec une meilleure mise en page pour inclure des **silhouettes réalistes de spectateurs** à gauche et à droite de la vidéo. Chaque côté comporte plusieurs tailles de silhouettes pour simuler une audience autour de l'utilisateur.

### Étapes pour tester ce code :

1. **Créer une page GitHub** :
   - Suivez les instructions pour créer un fichier `index.html` sur une page GitHub ou dans un autre hébergement HTML. Vous pouvez également utiliser des plateformes comme [CodePen](https://codepen.io/) ou [JSFiddle](https://jsfiddle.net/) pour tester rapidement.

2. **Vérifiez votre navigateur** :
   - Chrome ou Firefox à jour sont nécessaires, et l'accès à la webcam doit être explicitement accepté.

3. **Intégration dans Wix** :
   - Utilisez un **widget HTML** dans votre site Wix pour insérer le code. Il doit être hébergé en dehors de Wix, car la plateforme bloque directement l'accès aux ressources matérielles (comme la webcam).

Si vous rencontrez des problèmes, vous pouvez déployer ce fichier sur un hé
